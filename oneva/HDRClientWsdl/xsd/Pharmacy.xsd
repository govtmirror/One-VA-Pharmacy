<?xml version="1.0" encoding="UTF-8"?>
<!--
== Generated by hyperModel (www.XMLmodeling.com) Wed Mar 10 10:21:19 MST 2010
== Model: VHIM
== Package: Pharmacy
-->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:basedatatypes="Basedatatypes" xmlns:common="Common" xmlns:pharmacy="Pharmacy" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="Pharmacy">
  <xsd:import namespace="Basedatatypes" schemaLocation="Basedatatypes.xsd"/>
  <xsd:import namespace="Common" schemaLocation="Common.xsd"/>
  <!-- ================================================== -->
  <!-- =====  Complex Type Definitions  -->
  <!-- ================================================== -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  ActivityLog  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="ActivityLog">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="activityDate" type="basedatatypes:PointInTime"/>
      <xsd:element minOccurs="0" name="reason" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="initiator" type="common:PractitionerParticipationLite"/>
      <xsd:element minOccurs="0" name="comment" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  CancelAct  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="CancelAct">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="cancelDate" type="basedatatypes:PointInTime"/>
      <xsd:element maxOccurs="unbounded" minOccurs="0" name="comments" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  DispensedDrugInstance  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="DispensedDrugInstance">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="drugUnitPrice" type="basedatatypes:Money"/>
      <xsd:element minOccurs="0" name="expirationDate" type="basedatatypes:PointInTime"/>
      <xsd:element minOccurs="0" name="lotId" type="xsd:string"/>
      <xsd:element minOccurs="0" name="ndc" type="basedatatypes:HL72CodedElementLite"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  MedicationDispense  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType abstract="true" name="MedicationDispense">
    <xsd:sequence>
      <xsd:element name="comments"                maxOccurs="unbounded" minOccurs="0" type="xsd:string"/>
      <xsd:element name="dispenseDate"            minOccurs="0" type="basedatatypes:PointInTime"/>
      <xsd:element name="fillDate"                minOccurs="0" type="basedatatypes:PointInTime"/>
      <xsd:element name="quantityDispensed"       minOccurs="0" type="basedatatypes:PhysicalQuantity"/>
      <xsd:element name="currentProvider"         minOccurs="0" type="common:PractitionerLite"/>
      <xsd:element name="currentProviderComments" maxOccurs="unbounded" minOccurs="0" type="xsd:string"/>
      <xsd:element name="loginDate"               minOccurs="0" type="basedatatypes:PointInTime"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  MedicationInstructionComponent  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="MedicationInstructionComponent">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="conjunction" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="dispenseUnitsPerDose" type="xsd:string"/>
      <xsd:element minOccurs="0" name="dosageOrdered" type="xsd:string"/>
      <xsd:element minOccurs="0" name="noun" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="route" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="schedule" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="verb" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="giveUnits" type="basedatatypes:HL72CodedElementLite"/>
      <xsd:element minOccurs="0" name="intendedDuration" type="xsd:string"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  MedicationPromise  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType abstract="true" name="MedicationPromise">
    <xsd:sequence>
      <xsd:element name="recordIdentifier"                  type="basedatatypes:HL72EntityIdentifier"/>
      <xsd:element minOccurs="0" name="pdtsPrescriptionId"  type="xsd:string"/>
      <xsd:element minOccurs="0" name="prescriptionId"      type="xsd:string"/>
      <xsd:element minOccurs="0" name="pharmacyPatientType" type="xsd:string"/>
      <xsd:element minOccurs="0" name="specialDrugTracking" type="pharmacy:SpecialDrugTracking"/>
      <xsd:element minOccurs="0" name="dataEnterer"         type="common:PractitionerParticipationLite"/>
      <xsd:element minOccurs="0" name="pharmacyRequest"     type="pharmacy:PharmacyRequest"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  OutpatientMedicationDispense  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="OutpatientMedicationDispense">
    <xsd:complexContent>
      <xsd:extension base="pharmacy:MedicationDispense">
        <xsd:sequence>
          <xsd:element name="daysSupply"               minOccurs="0"   type="xsd:string"/>
          <xsd:element name="identifier"               minOccurs="0"   type="basedatatypes:HL72EntityIdentifier"/>
          <xsd:element name="levelOfUnderstanding"     minOccurs="0"   type="basedatatypes:HL72CodedElementLite"/>
          <xsd:element name="mailWindow"               minOccurs="0"   type="xsd:string"/>
          <xsd:element name="releaseDate"              minOccurs="0"   type="basedatatypes:PointInTime"/>
          <xsd:element name="wasPatientCounseled"      minOccurs="0"   type="basedatatypes:HL72CodedElementLite"/>
          <xsd:element name="division"                 minOccurs="0"   type="common:PharmacyDivision"/>
          <xsd:element name="dispensedDrug"            minOccurs="0"   type="pharmacy:DispensedDrugInstance"/>
          <xsd:element name="pharmacist"               minOccurs="0"   type="common:PractitionerParticipationLite"/>
          <xsd:element name="cmopEventStatus"          minOccurs="0"   type="basedatatypes:HL72CodedElementLite"/>
          <xsd:element name="numberOfRefillsRemaining" minOccurs="0"  nillable="true" type="xsd:int"/>
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  OutpatientMedicationPromise  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="OutpatientMedicationPromise">
    <xsd:complexContent>
      <xsd:extension base="pharmacy:MedicationPromise">
        <xsd:sequence>
          <xsd:element name="patient"                     type="common:PatientLite"/>
          <xsd:element name="expirationDate"              type="basedatatypes:PointInTime"  minOccurs="0"  />
          <xsd:element name="lastDispenseDate"            type="basedatatypes:PointInTime" minOccurs="0" />
          <xsd:element name="numberOfRefillsAuthorized"   type="xsd:int" minOccurs="0"  nillable="true" />
          <xsd:element name="patientInstructions"         type="xsd:string" maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="otherPatientInstructions"    type="xsd:string" maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="expandedPatientInstructions" type="xsd:string" maxOccurs="unbounded" minOccurs="0"  />
          <xsd:element name="pharmacyInstructions"        type="xsd:string" maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="sig"                         type="xsd:string" maxOccurs="unbounded" minOccurs="0"  />
          <xsd:element name="copayTransactionType"        type="basedatatypes:HL72CodedElementLite" minOccurs="0" />
          <xsd:element name="transitionalRxBenefit"       type="basedatatypes:HL72CodedElementLite" minOccurs="0" />
          <xsd:element name="treatmentFactor"             type="common:TreatmentFactor"                   maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="originalDispense"            type="pharmacy:OutpatientMedicationDispense"    minOccurs="0" />
          <xsd:element name="refillDispense"              type="pharmacy:OutpatientMedicationDispense"    maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="partialDispense"             type="pharmacy:OutpatientMedicationDispense"    maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="cancel"                      type="pharmacy:CancelAct"                       minOccurs="0" />
          <xsd:element name="medicationInstructions"      type="pharmacy:MedicationInstructionComponent"  maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="finisher"                    type="common:PractitionerParticipationLite"     minOccurs="0" />
          <xsd:element name="activityLog"                 type="pharmacy:ActivityLog" maxOccurs="unbounded" minOccurs="0" />
          <xsd:element name="recordSource"                type="basedatatypes:HL72FacilityIdentifier" minOccurs="0" />
          <xsd:element name="recordVersion"               type="xsd:int" minOccurs="0" />
          <xsd:element name="recordUpdateTime"            type="basedatatypes:PointInTime" minOccurs="0" />
        </xsd:sequence>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  PharmacyRequest  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="PharmacyRequest">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="cosigner" type="common:PractitionerParticipationLite"/>
      <xsd:element minOccurs="0" name="orderedMedication" type="common:Medicine"/>
      <xsd:element minOccurs="0" name="genericRequestIdentifier" type="basedatatypes:HL72EntityIdentifier"/>
      <xsd:element minOccurs="0" name="orderLocationIdentifier" type="basedatatypes:HL72LocationIdentifier"/>
      <xsd:element minOccurs="0" name="orderedItem" type="common:PharmacyOrderableItem"/>
      <xsd:element minOccurs="0" name="orderingInstitutionIdentifier" type="basedatatypes:HL72OrganizationIdentifier"/>
      <xsd:element minOccurs="0" name="orderDate" type="basedatatypes:PointInTime"/>
      <xsd:element minOccurs="0" name="status" type="xsd:string"/>
      <xsd:element minOccurs="0" name="statusModifier" type="basedatatypes:HL72CodedElementLite"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  SpecialDrugTracking  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="SpecialDrugTracking">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="totalDailyDosage" type="basedatatypes:PhysicalQuantity"/>
      <xsd:element minOccurs="0" name="wbcObservation" type="pharmacy:WbcObservation"/>
    </xsd:sequence>
  </xsd:complexType>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <!--  WbcObservation  -->
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsd:complexType name="WbcObservation">
    <xsd:sequence>
      <xsd:element minOccurs="0" name="count" type="basedatatypes:PhysicalQuantity"/>
      <xsd:element minOccurs="0" name="testDate" type="basedatatypes:PointInTime"/>
    </xsd:sequence>
  </xsd:complexType>
</xsd:schema>
